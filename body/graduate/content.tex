\chapter{绪论}
\section{研究背景及意义}
\section{国内外研究现状}
\section{本文主要工作}
\section{本文结构安排}

\chapter{相关技术}
\section{UWB信道脉冲响应相关技术}
\section{深度学习相关技术}

\chapter{数据预处理}
\section{引言}
\section{使用preamble归一化}
\section{上采样}
Decawave（Qorvo）的 DWM1000 和 NXP 的 NCJ29D5 设备的采样频率为 \(998.4 \, \text{MHz}\)，对应的采样间隔为 \( \Delta \tau = 1.0016 \, \text{ns}\)。
电磁波在空气中的传播速度为 \(c = 299792458 \, \text{m/s}\)，对应的波长为 \(\lambda = 0.2998 \, \text{m}\)。这个精度已经足够满足室内定位的需求。

然而，由于发送和接收设备之间的晶振并不能完全同步，导致接收到的信号的采样的相对开始时间不同步。
有一些研究者提出利用这一不同步来提高信号的采样频率，从而提高定位的精度~\cite{Ledergerber}。
也有一些研究者提出根据 IEEE 802.15.4a 规范~\cite{IEEE_Std_802.15.4a}，UWB CIR 的频谱几乎是矩形，因此可以利用 sinc 插值来提高信号的采样频率~\cite{MAMPI}。

本文借鉴了以上两种方法的思路，通过在频域中添加零来实现对信号的上采样，然后利用逆傅里叶变换（IFFT）将其转回到时域中，对结果取均值来叠加多帧的信息。下面将详细介绍上诉三种方法。

\subsection{均值滤波}
由于接收到的信号的采样的相对开始时间不同步，所以如果把λ分成多个等长的区间，每次采样只会落到其中的同一个区间，通过多次累加可以在每个区间内得到一个均值，从而提高采样率。

均值滤波算法通过以下形式的分段线性函数的系数 \( h = h_0 , h_1 , \ldots , h_{N_{\text{knots}} -1} \) 来跟踪当前测量的信道冲激响应（CIR）的均值：
\[ h(\tau ) = \frac{\tau  - \tau_i}{\Delta \tau_{\text{knots}}} h_i + \frac{\tau  - \tau_i}{\Delta \tau_{\text{knots}}} h_{i +1} \]
其中 \( i \) 满足 \( \tau_i \leq \tau < \tau_{i+1} \)，并且 \( \Delta \tau_{\text{knots}} \) 是分段线性参数化的节点间的间隔。

分段线性参数化的节点 \( \tau_i \) 由以下公式给出：
\[ \tau_i = \tau_{\text{start}} + \Delta \tau_{\text{knots}} \cdot i \]
对于 \( i = \{0, \ldots , N_{\text{knots}} - 1\} \)。

节点总数 \( N_{\text{knots}} \) 由以下公式给出：
\[ N_{\text{knots}} = \frac{\tau_{\text{end}} - \tau_{\text{start}}}{\Delta \tau_{\text{knots}}} + 1 \]

分段线性函数表示CIR的均值计算复杂度低，该算法可以在每个DWM1000模块的主微控制器上运行，这对于实时处理至关重要，并且可以减少用于传输数据的空中时间。
由于其轻量化的特性，使其适用于具有有限内存和计算能力的嵌入式设备，并且可以实时执行。

\subsection{插值法}
本文主要使用了UWB的信道3与信道4。据IEEE 802.15.4a，UWB信道3的中心频率为4492.8Mhz，带宽为449.2Mhz，UWB信道4的中心频率为3993.6，带宽为1331.2Mhz。
信道3,4的频谱图像如图\ref{fig:spectrum_mask}所示，他们的频谱接近矩形，因此可以利用sinc插值来提高信号的采样频率。
\begin{figure}[htbp]
    \centering
    \includegraphics[width=.7\linewidth]{plotted/spectrum_mask}
    \caption{\label{fig:spectrum_mask}UWB信道3，4频谱}
\end{figure}

\begin{figure}[htbp]
    \centering
    \begin{subfigure}{0.33\textwidth}
        \centering
        \includegraphics[width=1.0\textwidth]{plotted/interpolation/time.png}
        \caption{\label{fig:time}原始时域图}
    \end{subfigure}%
    \begin{subfigure}{0.33\textwidth}
        \centering
        \includegraphics[width=1.0\textwidth]{plotted/interpolation/zero_time.png}
        \caption{\label{fig:zero_time}零填充后的时域图}
    \end{subfigure}
    \begin{subfigure}{0.33\textwidth}
        \centering
        \includegraphics[width=1.0\textwidth]{plotted/interpolation/sinc_time.png}
        \caption{\label{fig:sinc_time}sinc插值后的时域图}
    \end{subfigure}

    \begin{subfigure}{0.33\textwidth}
        \centering
        \includegraphics[width=1.0\textwidth]{plotted/interpolation/freq.png}
        \caption{\label{fig:freq}原始频域图}
    \end{subfigure}%
    \begin{subfigure}{0.33\textwidth}
        \centering
        \includegraphics[width=1.0\textwidth]{plotted/interpolation/zero_freq.png}
        \caption{\label{fig:zero_freq}零填充后的频域图}
    \end{subfigure}
    \begin{subfigure}{0.33\textwidth}
        \centering
        \includegraphics[width=1.0\textwidth]{plotted/interpolation/sinc_freq.png}
        \caption{\label{fig:sinc_freq}sinc插值后的频域图}
    \end{subfigure}
    \caption{sinc插值时频域图}
    \label{fig:interpolation}
\end{figure}

零填充:
首先，通过在原始数据样本(图\ref{fig:time})之间插入零，
对数据进行上采样。在每个原始数据样点之间插入 \( ( \text{upsample\_factor} - 1) \) 个零。
例如，如果上采样因子为4，那么在每个数据样点之间插入3个零，得到零填充后的时域图(图\ref{fig:zero_time})。
零填充的表达式如下所示：
\[
    x[n] = \{x[0], 0, 0, 0, x[1], 0, 0, 0, x[2], 0, 0, 0, \ldots\}
\]

从频域看，原始的频域图像（图\ref{fig:freq}）变为零填充后的频域图像（图\ref{fig:zero_freq}）。
为了使频域保持一致，需要通过在时域卷积sinc函数实现在频域的低通滤波。

构建 sinc 函数:
构建 sinc 函数以用于插值。sinc 函数是由以下公式定义的：
\[
    \text{sinc}(x) = \dfrac{\sin(\pi x)}{\pi x}
\]

在代码中，sinc 函数的参数是通过时域索引和上采样因子来调整的，以确保 sinc 函数正确对齐在零填充数据的样点上。

\[
    t = \text{np.arange}(-\text{len(zero\_padded\_data)}//2, \text{len(zero\_padded\_data)}//2)
\]
\[
\text{sinc\_func} = \text{np.sinc}(t / \text{upsample\_factor})
\]
其中zero\_padded\_data为零填充后的数据，upsample\_factor为上采样因子。
sinc函数的时频域图如\ref{fig:sinc}所示。
\begin{figure}[htbp]
    \centering
    \includegraphics[width=.7\linewidth]{plotted/interpolation/sinc.png}
    \caption{\label{fig:sinc}sinc函数时频图}
\end{figure}

卷积 (Convolution):
使用 sinc 函数对零填充的数据进行卷积，以得到插值的数据。这一步通过数学卷积操作完成，可以通过以下公式表示：
\[
    y[n] = \sum_{k=-\infty}^{\infty} x[k] \cdot \text{sinc\_func}[n - k]
\]

在代码中，这是通过 \texttt{np.convolve} 函数完成的：
\[
    \text{interpolated\_data} = \text{np.convolve}(\text{zero\_padded\_data}, \text{sinc\_func}, \text{mode}='same')
\]
从频域看，这相当于sinc函数与零填充数据的傅里叶变换的乘积，把零填充后的频域图(\ref{fig:zero_freq})转化为 sinc 插值后的频域图(\ref{fig:sinc_freq})。
从而在保证频域一致性的同时提高了时域的采样率



\subsection{fft法}

此外，我们对测量结果应用了 sinc 插值。我们选择应用 sinc 插值是因为 IEEE 802.15.4a 通道 3 的频谱几乎是矩形的。
对于 sinc 函数，我们将带宽加倍至 2B = 1 GHz，以避免相邻的 I 和 Q 样本之间产生不希望的干扰。
为了拟合 CIR，我们在采样时间 Dtsinc ≪ 1/(2B) 的情况下形成了 sinc 函数。
我们在 CIR 的样本之间添加零，以确保拟合和测量具有相同的采样时间。
随后，我们将 sinc 函数与扩展的 CIR 测量值进行卷积。图 8b 显示了插值和对齐的 CIR 测量结果。
\cite{IEEE_Std_802.15.4a}，
\section{对齐}
\section{异常值剔除}
\section{方差图}

\chapter{定位}

\chapter{脚踢}

\section{引言}
\section{采集设备}
\section{模型训练}
\section{模型部署}





\chapter{呼吸}

\chapter{总结与展望}

\chapter{关于本模板}

本模板根据浙江大学研究生院编写的《浙江大学研究生学位论文编写规则》~\cite{zjugradthesisrules}，
在原有的 zjuthesis 模板~\cite{zjuthesis}基础上开发而来。

本模板的本科生版本\cite{zjuthesisrules}得到了浙江大学本科生院老师的支持与审核，
已经在本科生院网上公示。
但当前的研究生版本并未经过研究生院老师的审核，
同学们使用时要注意对照模板与要求，
切不可盲目使用。

作者本人并未编写过浙江大学研究生毕业论文，
所以不清楚具体要求。
如果有热心同学愿意帮忙，
可以替我联系相关老师，我会配合审核并修改代码。

\section{Overleaf 使用注意事项}

如果你在Overleaf上编译本模板，请注意如下事项：

\begin{itemize}
    \item 删除根目录的 ``.latexmkrc'' 文件，否则编译失败且不报任何错误
    \item 字体有版权所以本模板不能附带字体，请务必手动上传字体文件，并在各个专业模板下手动指定字体。
          具体方法参照 GitHub 主页的说明。
    \item 当前的Overleaf默认使用TexLive 2017进行编译，但一些伪粗体复制乱码的问题需要TexLive 2019版本来解决。
          所以各位同学可以在Overleaf上编写论文时务必切换到TexLive 2019或更新版本来编译，以免产生查重相关问题。
          具体说明参照 GitHub 主页。
\end{itemize}


\section{节标题}

我们可以用includegraphics来插入现有的jpg等格式的图片，
如\autoref{fig:zju-logo}所示。

\begin{figure}[htbp]
    \centering
    \includegraphics[width=.3\linewidth]{logo/zju}
    \caption{\label{fig:zju-logo}浙江大学LOGO}
\end{figure}


\subsection{小节标题}


\par 如\autoref{tab:sample}所示，这是一张自动调节列宽的表格。

\begin{table}[htbp]
    \caption{\label{tab:sample}自动调节列宽的表格}
    \begin{tabularx}{\linewidth}{c|X<{\centering}}
        \hline
        第一列 & 第二列 \\ \hline
        xxx & xxx \\ \hline
        xxx & xxx \\ \hline
        xxx & xxx \\ \hline
    \end{tabularx}
\end{table}


\par 如\autoref{equ:sample}，这是一个公式

\begin{equation}
    \label{equ:sample}
    A=\overbrace{(a+b+c)+\underbrace{i(d+e+f)}_{\text{虚数}}}^{\text{复数}}
\end{equation}

\chapter{另一章}


\begin{figure}[htbp]
    \centering
    \includegraphics[width=.3\linewidth]{example-image-a}
    \caption{\label{fig:fig-placeholder}图片占位符}
\end{figure}

\chapter{再一章}

\par 如\autoref{alg:sample}，这是一个算法

\begin{algorithm}[H]
    \begin{algorithmic} % enter the algorithmic environment
        \REQUIRE $n \geq 0 \vee x \neq 0$
        \ENSURE $y = x^n$
        \STATE $y \Leftarrow 1$
        \IF{$n < 0$}
        \STATE $X \Leftarrow 1 / x$
        \STATE $N \Leftarrow -n$
        \ELSE
        \STATE $X \Leftarrow x$
        \STATE $N \Leftarrow n$
        \ENDIF
        \WHILE{$N \neq 0$}
        \IF{$N$ is even}
        \STATE $X \Leftarrow X \times X$
        \STATE $N \Leftarrow N / 2$
        \ELSE[$N$ is odd]
        \STATE $y \Leftarrow y \times X$
        \STATE $N \Leftarrow N - 1$
        \ENDIF
        \ENDWHILE
    \end{algorithmic}
    \caption{\label{alg:sample}算法样例}
\end{algorithm}